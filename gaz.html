<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="refresh" content="5" >
<HEAD>
<TITLE>GAZ OLCUMLERI</TITLE>
</HEAD>
<link rel="import" href="gaz.php">
<script>
$.ajax({
        src:'index2.php',
        type:'GET', 
});

</script>
<div id="chartContainer" style="height: 100%; width: 100%;" onclick="window.open('gaz.html');"></div>
<script>
window.onload = function () {

var dataPoints = [];
var dataPoints1= [];
var dataPoints2= [];

var chart = new CanvasJS.Chart("chartContainer", {
	animationEnabled: true,
	title:{
		text: "Gaz Ölçümleri",
		titleFontSize: 14,
	},
	axisX: {
		title: "ZAMAN",
		titleFontSize: 10,
		valueFormatString: "DD-MM-YY HH:mm:ss",
		//intervalType: "day",
		//interval: 1
		//labelAutoFit: false,
		labelAngle: -60
		//labelMaxWidth: 1,
		//labelWrap: true
		//labelFontSize: 1
	},
	axisY: {
		title: "(co, ppm, lpg)",
		titleFontSize: 10,
		includeZero: false,
		suffix: " "
	},

	toolTip:{
		shared: false
	},
	data: [{
		name: "CO",
		type: "spline",
		yValueFormatString: "#0.00000000## DUMAN",
		showInLegend: true,
		dataPoints:dataPoints
	
	},
	{
		name: "DUMAN",
		type: "spline",
		yValueFormatString: "#0.00000000## ppm",
		showInLegend: true,
		dataPoints:dataPoints1
	
	},
	{
		name: "LPG",
		type: "spline",
		yValueFormatString: "#0.00000000## ppm",
		showInLegend: true,
		dataPoints:dataPoints2
	
	}]
});

function addData(data) {
	for (var i = 0; i < data.length; i++) { 
		dataPoints.push({x: new Date(data[i].ZAMAN2*1000),y: Number(data[i].CO)});
		dataPoints1.push({x: new Date(data[i].ZAMAN2*1000),y: Number(data[i].DUMAN)});
		dataPoints2.push({x: new Date(data[i].ZAMAN2*1000),y: Number(data[i].LPG)});
		}
	
	chart.render();
	//console.log( JSON.stringify(dataPoints1) );

}

$.getJSON("gaz.json", addData);

function toggleDataSeries(e){
	if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
		e.dataSeries.visible = false;
	}
	else{
		e.dataSeries.visible = true;
	}
	chart.render();
}


}


</script>
<script src="canvasjs.min.js"></script>
<script src="jquery-1.11.1.min.js"></script>
</head>
<body>
<div id="chartContainer" style="height: 370px; width: 100%;"></div>
</body>
</html>